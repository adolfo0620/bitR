{% extends "bitweb/base.html" %}
{% load staticfiles %}
{% block title %}{{ user.username }} Inbox - {% endblock %}
{% block header %}
    {% load staticfiles %}
    <script src="{%static 'js/inbox.js' %}"></script>
    <script src="{%static 'js/mustache.min.js' %}"></script>
    <script src="{%static 'js/jq-repeat.min.js' %}"></script>
	<div class = "row">
	    <h1 class="col-md-2"><ahref={% url 'bitweb:index' %} id = 'logo'>BitR</a></h1>
		<div class="row col md-4">
			<div class="input-group">
				<span class="input-group-btn">
					<button class="btn btn-raised" type="button" id="search-btn">Go!</button>
				</span>
				<input type="text" class="form-control" placeholder="Search for...">
			</div>
		</div>
	</div>
{% endblock %}

{% block content %}
	<div class="row">
		<div class="dropdown col-md-2 col-md-offset-6">
		  <button class="btn btn-material-blue-grey-100 dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="true" id="user_id" value="{{user.id}}">
		    Identities
		    <span class="caret"></span>
		  </button>
		  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">					   {% verbatim %}
		    	<li role="presentation" jq-repeat="identities"><a role="menuitem" tabindex="-1" href="#">{{ identity }}</a></li>
			{% endverbatim %}  
			<li role="presentation" class="divider"></li>
			<li role="presentation"><a role="menuitem" tabindex="-1" href="#" data-toggle="modal" data-target="#create_identity">Create New Identity</a></li>
		  </ul>
		</div>
		<a class="col-md-2" href={% url 'bitweb:profile' %} id = 'profile-btn'><button class="btn btn-material-blue-grey-100">Profile</button></a>
	    <a class="col-md-2" href={% url 'bmapi:logout' %} id = 'logout-btn'>Logout</a>
	</div>

	<div class = "row">
		<div class = "col-md-2">
			<button class="btn btn-material-blue-grey-100" id = "compose-btn">Compose</button>
			<br>
			<button class="btn btn-material-blue-grey-100" id = "chan-post-btn">Post to Chan</button>
		</div>
		<div class="dropdown col-md-2">
		  <button class="btn btn-material-blue-grey-100 dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
		    Show
		    <span class="caret"></span>
		  </button>
		  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
		    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">All</a></li>
		    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">None</a></li>
		    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Read</a></li>
		    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Unread</a></li>
		    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Starred</a></li>
		    	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Unstarred</a></li>
		  </ul>
		</div>
		<button class = "btn btn-material-blue-grey-100 col-md-offset-2 col-md-offset-6" id = 'refresh-btn'>Refresh</button>
	</div>

	<div class = "row">
		<div class="btn-group-vertical col-md-2">
			<button type="button" class="btn">Inbox</button>
			<button type="button" class="btn">Starred</button>
			<button type="button" class="btn">Sent Mail</button>
			<button type="button" class="btn">Drafts</button>
			<button type="button" class="btn">Spam</button>
			<button type="button" class="btn">Trash</button>
		</div>
		<div class = "col-md-10">
			<div class="btn-group btn-group-justified" role="group" aria-label="primaryChan">
				<div id = 'primary-tab' class='btn'>
					<p>Primary</p>
				</div>
				<div class="dropdown btn-group" role="group">
				  <button class="btn dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
				    Chans
				    <span class="caret"></span>
				  </button>
				  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">					   {% verbatim %}
				    	<li role="presentation" jq-repeat="chans"><a role="menuitem" tabindex="-1" href="#">{{ chan }}</a></li>
					{% endverbatim %}
					<li role="presentation" class="divider"></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="#" data-toggle="modal" data-target="#create_chan">Create New Chan</a></li>
				  </ul>
				</div>
			</div>
			<ul>
			{% verbatim %}
				<li jq-repeat="inbox">{{ message }}</li>
			{% endverbatim %}
			</ul>
		</div>
	</div>

<!-- new identity modal -->
	<div class="modal fade" id="create_identity" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
		<div class="modal-content">
	        <div class="modal-header">
	 			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
	        	<h4 class="modal-title" id="myModalLabel">New Identity</h4>
	        </div>
		    <div class="modal-body">
				<form>
				  <div class="form-group">
				    <label for="Identity Name">Identity Nickname</label>
				    <input type="email" class="form-control" id="identity_name" placeholder="Enter Identity Nickname">
				    <p class="help-block">Create an 'Identity' for your mailbox.  You can create more anytime you want, and have different mailboxes for different Identities!</p>
		            <button type="button" class="btn" data-dismiss="modal">Cancel</button>
			        <button type="button" id="create_id_button" class="btn btn-material-blue-grey-500" data-dismiss="modal">Create</button>
				  </div>
				</form>
		    </div>
	    </div>
	  </div>
	</div>

<!-- new chan modal -->
	<div class="modal fade" id="create_chan" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-sm">
		<div class="modal-content">
	        <div class="modal-header">
	 			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
	        	<h4 class="modal-title" id="myModalLabel">New Chan</h4>
	        </div>
		    <div class="modal-body">
				<form>
				  <div class="form-group">
				    <label for="Chan Name">Chan Passphrase</label>
				    <input type="email" class="form-control" id="chan_name" placeholder="Enter Chan Name(passphrase)">
				    <p class="help-block">Enter a name for your chan. If you choose a sufficiently complex chan name (like a strong and unique passphrase) and none of your friends share it publicly then the chan will be secure and private. If you and someone else both create a chan with the same chan name then it is currently very likely that they will be the same chan!</p>
		            <button type="button" class="btn" data-dismiss="modal">Cancel</button>
			        <button type="button" id="create_chan_button" class="btn btn-material-blue-grey-500" data-dismiss="modal">Create</button>
				  </div>
				</form>
		    </div>
	    </div>
	  </div>
	</div>
{% endblock %}